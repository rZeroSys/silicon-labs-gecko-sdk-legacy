<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Connect: Mailbox Server Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Connect
   &#160;<span id="projectnumber">Silicon Labs</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mailbox__server.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mailbox Server Plugin<div class="ingroups"><a class="el" href="group__silabs__connect__af.html">Connect Application Framework API Reference</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>APIs for mailbox server.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4ef6d076c9eb6675c955cad440e9bbca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62">EmberAfMailboxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mailbox__server.html#ga4ef6d076c9eb6675c955cad440e9bbca">emberAfPluginMailboxServerAddMessage</a> (<a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a> destination, uint8_t *message, <a class="el" href="group__ember__types.html#ga95ce5c184eda6ba8443d28a53cb28de2">EmberMessageLength</a> messageLength, uint8_t tag, bool useSecurity)</td></tr>
<tr class="memdesc:ga4ef6d076c9eb6675c955cad440e9bbca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a message to the mailbox server queue. The message is stored in the internal queue until the destination node queries the mailbox server node for messages or upon timeout.  <a href="#ga4ef6d076c9eb6675c955cad440e9bbca">More...</a><br /></td></tr>
<tr class="separator:ga4ef6d076c9eb6675c955cad440e9bbca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5213b494817cfb611233fafa8b7d1b7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mailbox__server.html#ga5213b494817cfb611233fafa8b7d1b7f">emberAfPluginMailboxServerMessageDeliveredCallback</a> (<a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62">EmberAfMailboxStatus</a> status, <a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a> messageDestination, uint8_t tag)</td></tr>
<tr class="memdesc:ga5213b494817cfb611233fafa8b7d1b7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mailbox Server Message Delivered Callback.  <a href="#ga5213b494817cfb611233fafa8b7d1b7f">More...</a><br /></td></tr>
<tr class="separator:ga5213b494817cfb611233fafa8b7d1b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>APIs for mailbox server. </p>
<p>Mailbox protocol is designed for devices that can't be online on the network all the time. The most common example for this is a sleepy end device.</p>
<p>Mailbox clients and the server can submit messages into the mailbox, which is stored in RAM on the mailbox server. Clients can then query the mailbox server for available messages.</p>
<p>The mailbox server will notify clients who submit messages when a message was delivered or when it couldn't be delivered due to an error.</p>
<p>Mailbox uses a plugin configurable protocol endpoint, which is 15 by default.</p>
<p>The server can also configure the size of the mailbox (in number of packets, 25 by default) and the packet timeout, after which the server drops the message and notifies the source of the error.</p>
<p>The mailbox protocol uses standard data messages, so in case of sleepy end devices, it will use the indirect queue. This means that if a sleepy end device sends a request to a mailbox server, the end device should poll for the response.</p>
<dl class="section note"><dt>Note</dt><dd>Mailbox is not available in MAC mode due to the lack of endpoints.</dd></dl>
<p>See <a class="el" href="mailbox-server_8h.html">mailbox-server.h</a> and mailbox-server.c for source code. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4ef6d076c9eb6675c955cad440e9bbca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ef6d076c9eb6675c955cad440e9bbca">&#9670;&nbsp;</a></span>emberAfPluginMailboxServerAddMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62">EmberAfMailboxStatus</a> emberAfPluginMailboxServerAddMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a>&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#ga95ce5c184eda6ba8443d28a53cb28de2">EmberMessageLength</a>&#160;</td>
          <td class="paramname"><em>messageLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useSecurity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a message to the mailbox server queue. The message is stored in the internal queue until the destination node queries the mailbox server node for messages or upon timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">destination</td><td>The node ID of the destination for this data message.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>A pointer to the message to be enqueued.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">messageLength</td><td>The length in bytes of the message to be enqueued.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>A tag value which will be returned in the corresponding <a class="el" href="group__mailbox__server.html#ga5213b494817cfb611233fafa8b7d1b7f">emberAfPluginMailboxServerMessageDeliveredCallback()</a> callback. The application can use to match the callbacks with the call.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">useSecurity</td><td>Set it <b>true</b> if the data message should be sent to the server using security.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62" title="Mailbox return status codes. ">EmberAfMailboxStatus</a> value of:<ul>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a533e641d027eea6eef79452fa4a214b3">EMBER_MAILBOX_STATUS_SUCCESS</a> if the message was successfully added to the packet queue.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a2427dc05fbe1a335da3a4b7a3ac2fc74">EMBER_MAILBOX_STATUS_INVALID_CALL</a> if the passed message is invalid.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a5a4173961c6bf0f56f618f58e7f9a442">EMBER_MAILBOX_STATUS_INVALID_ADDRESS</a> if the passed destination address is invalid.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a698752f0d7c2bda3617ba682027bcd6a">EMBER_MAILBOX_STATUS_MESSAGE_TOO_LONG</a> if the payload size of the passed message exceeds the maximum allowable payload for the passed transmission options.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a020611023ec26eaf8bc8e039e92441aa">EMBER_MAILBOX_STATUS_MESSAGE_TABLE_FULL</a> if the packet table is already full.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62aac0184f51266235348d0d3778cb07508">EMBER_MAILBOX_STATUS_MESSAGE_NO_BUFFERS</a> if not enough memory buffers are available for storing the message content.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mailbox__client.html#ga61dbd46a4bc17e7dd92592e99c003c96" title="Submit a data message to a mailbox server. If this API returns an EmberAfMailboxStatus value of EMBER...">emberAfPluginMailboxClientMessageSubmit()</a> </dd></dl>

</div>
</div>
<a id="ga5213b494817cfb611233fafa8b7d1b7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5213b494817cfb611233fafa8b7d1b7f">&#9670;&nbsp;</a></span>emberAfPluginMailboxServerMessageDeliveredCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberAfPluginMailboxServerMessageDeliveredCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62">EmberAfMailboxStatus</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a>&#160;</td>
          <td class="paramname"><em>messageDestination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mailbox Server Message Delivered Callback. </p>
<p>This callback is invoked at the server when a message submitted locally by the server was successfully delivered or when it timed-out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>An <a class="el" href="group__mailbox__common.html#gaccc777b1ed7b13e1696747a720023f62" title="Mailbox return status codes. ">EmberAfMailboxStatus</a> value of:<ul>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62a533e641d027eea6eef79452fa4a214b3">EMBER_MAILBOX_STATUS_SUCCESS</a> indicates that the message was successfully delivered to the final destination.</li>
<li><a class="el" href="group__mailbox__common.html#ggaccc777b1ed7b13e1696747a720023f62aea5488bb961e8e0aea1da531e4bc659d">EMBER_MAILBOX_STATUS_MESSAGE_TIMED_OUT</a> indicates that the message timed-out and was removed from the server queue.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">messageDestination</td><td>The node ID of the destination.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>The tag value passed in the <a class="el" href="group__mailbox__server.html#ga4ef6d076c9eb6675c955cad440e9bbca">emberAfPluginMailboxServerAddMessage()</a> API.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mailbox__client.html#gae7947108f4b870b0b8793b63d8f2eeee" title="Mailbox Client Message Delivered Callback. ">emberAfPluginMailboxClientMessageDeliveredCallback()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
